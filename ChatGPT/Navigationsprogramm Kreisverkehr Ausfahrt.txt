Weiter zum Inhalt
Chatverlauf

Du:
erkläre ausführlich, wie ein Navigationsprogramm bei einem Kreisverkehr die Ausfahrtszahl für eine bestimmte Route herausfindet
ChatGPT:

Nachgedacht für 33s
Gern! Hier ist – praxisnah und technisch – wie ein Navi die „3. Ausfahrt im Kreisverkehr“ (o. Ä.) bestimmt.

1) Was das Navi „weiß“
Straßengraph: Die Karte ist als Graph modelliert: Knoten = Kreuzungen, Kanten = Straßenabschnitte mit Geometrie (Koordinaten), Einbahn/Tempolimit u. a.

Kreisverkehr-Erkennung: Ein Kreisverkehr ist als spezieller, einbahniger Ring markiert (z. B. junction=roundabout) und durchlaufbar in einer Richtung. Alternativ gibt’s „Rotaries“/„circulars“, die ähnlich, aber verkehrsrechtlich anders sind.

Zugangsrechte & Verbote: Jede Kante speichert, ob Autos dort fahren dürfen, Abbiegeverbote, Durchfahrtbeschränkungen, Privat/Service, etc.

Zusatzinfos: Spur- und Abbiegehinweise (z. B. turn:lanes), Zielbeschilderung („Richtung A5 / Stadt X“), Straßennamen.

2) Wo im Kreisverkehr die Route langläuft
Nach der eigentlichen Routenberechnung (z. B. Dijkstra/A*) steht fest, welche Kanten die Route benutzt. Für einen Kreisverkehr passiert Folgendes:

Anfahrt: Die Route führt über eine Zufahrtskante an einen Einstiegsknoten des Rings.

Ringtraverse: Ab dort folgt die Route dem Ring (ein oder mehrere kurze Kanten).

Austritt: An einem Ringknoten verlässt die Route den Kreisverkehr über eine Ausfahrtskante.

3) Was als „Ausfahrt“ zählt (Filter)
Beim Zählen werden nur Abzweige gezählt, die:

vom Ring nach außen führen (nicht weiter auf den Ring),

für das Fahrzeugprofil erlaubt sind (Auto erlaubt, kein „no_right_turn“, kein Durchfahrtsverbot),

hinreichend eigenständig sind (keine Parkplatzzufahrt, keine reine Rad-/Fußwege, keine internen Service-/Tankstellenwege),

ggf. duplizierte Fahrbahnen (geteilte Richtungsfahrbahnen desselben Abzweigs) zu einer Ausfahrt zusammenfassen (Heuristik: sehr kleine Winkelabstände, gleicher Straßenname/Ziel, unmittelbares Zusammenführen).

4) Die Zähllogik – Schritt für Schritt
Angenommen, wir kennen Einstiegsknoten E und die Ausfahrtskante A*, die unsere Route nimmt:

Ring identifizieren: Finde alle Knoten/Kanten, die den Ring bilden (ein geschlossener, einbahniger Zyklus).

Zählstart festlegen: Starte am ersten Ringknoten nach E in Fahrtrichtung auf dem Ring.

Rundgang: Gehe Knoten für Knoten auf dem Ring weiter.
An jedem Ringknoten:

Sammle alle aus dem Ring heraus führenden, gültigen Außenkanten (nach Filter aus §3).

Gruppiere nahe, parallele Außenkanten zu einem Exit (Duplikate vermeiden).

Erhöhe den Ausfahrtszähler um die Anzahl der gruppierten Exits (meist 0 oder 1).

Stop-Bedingung: Sobald der Rundgang den Knoten erreicht, an dem unsere Route über A* den Ring verlässt, halte an. Die bis dahin gezählte Zahl = Ansage-Ausfahrt.

Sonderfall U-Turn: Verlässt die Route den Ring wieder auf derselben Zufahrtsstraße (gegenläufige Fahrbahn), zählt das wie die entsprechende n-te Ausfahrt, nicht als „0“. Viele Systeme sprechen dann aber lieber „im Kreisverkehr wenden“.

Mini-Heuristiken (robuster in der Praxis)
Winkel-Schwellwerte: Zwei Abzweige, deren Abgangswinkel (gegenüber Tangente am Ring) um <~15° differieren, werden zusammengefasst.

Namens-/Zielgleichheit: Gleiche Straßennamen oder gleiche ausgeschilderte Ziele ⇒ gruppieren.

Kleinstzufahrten ausklammern: Sehr kurze Stummel (< x m), Service, Privat, Parkplatzzufahrten ⇒ nicht zählen (außer lokale Sprach-/Regelpräferenz verlangt es).

5) Warum nicht einfach „nach Winkel sortieren“?
Man könnte theoretisch alle Außenkanten winkelbasiert sortieren und die Position der Zielausfahrt darin zählen. In der Praxis ist Topologie robuster:

Der Ring ist einbahnig – die natürliche Reihenfolge ist die Traversierung in Fahrtrichtung.

Winkel können durch verrauschte Geometrie und aufgeteilte Fahrbahnen irreführen.

Die Topologie erlaubt das Zusammenfassen direkt benachbarter „Doppeläste“.

6) Beispiel
Ein Ring hat – ab deinem Einstieg – folgende Abzweige in Fahrtrichtung:
(1) Wohnstraße (Auto erlaubt) → zählt
(2) Parkplatzzufahrt → zählt nicht
(3) B-Straße (geteilte Fahrbahnen, zwei nahe Außenkanten mit gleichem Namen/Ziel) → als eine Ausfahrt zählen
(4) Radweg → nicht zählen
(5) Deine Route verlässt hier → Ansage: „Nimm die 3. Ausfahrt.“

7) Sprach- & Länderlogik
DACH/UK/FR u. a.: „Nimm die n-te Ausfahrt.“

Manche Länder/Apps nutzen lieber Richtungsangaben („links/geradeaus/rechts im Kreisverkehr“) oder Ziel-/Straßennamen („Richtung A5/Stadt X“).

Große Rotaries mit Ampeln/benannten Ausfahrten: Häufig „auf [Straßenname] ausfahren“ statt „n-te Ausfahrt“.

8) Pseudocode (vereinfacht)
route = berechnete Route
E = Einstiegsknoten in den Ring
A* = Ausfahrtskante der Route

ring = ermittleRing(E)               # alle Ringkanten/-knoten
k = nächsterRingknotenNach(E)
count = 0

while True:
  exits = []
  for edge in ausgehendeKanten(k):
    if edge.verlässt(ring) and edge.autoErlaubt and !edge.istService/Fuß/Rad:
      exits.append(edge)

  exits = gruppiereNachbarExits(exits)  # Winkel/Name/Ziel-Heuristik
  count += len(exits)

  if route.verlässtRingAn(k, A*):
    break

  k = ring.naechsterKnotenInFahrtrichtung(k)

ansage = f"Im Kreisverkehr die {count}. Ausfahrt nehmen"
9) Edge Cases & Fallbacks
Mini-Kreisverkehre (Markierung auf ebener Fahrbahn): oft als „links/rechts/geradeaus“ statt „n-te Ausfahrt“.

Fehlkartierung: Wenn z. B. Einbahn- oder Verbotsdaten fehlen, gleicht das Navi mit GPS-Map-Matching und Historik ab und kann zur Ziel-/Straßenname-Ansage wechseln.

Mehrspurer + Spurführung: Spurhinweise beeinflussen die Ansage, nicht die Zählung (die bleibt topologisch).

Sehr viele nahe Ausfahrten: Aggressiveres Gruppieren verhindert „5 Ausfahrten innerhalb 30 m“.

Kurz: Ein Navi zählt nicht „optisch“ die Ausfahrten, sondern topologisch: Es läuft die Route in Fahrtrichtung auf dem Ring ab, zählt dort alle gültigen Außenabzweige nach sinnvollen Filtern/Heuristiken, und stoppt, sobald die eigene Ausfahrt erreicht ist.



Keine ausgewähltKeine ausgewählt
ChatGPT kann Fehler machen. Überprüfe wichtige Informationen.
